let

io = #"io.cru",
lc = #"lc.cru",
arith = #"arith.cru",

add = arith.add,

prog = "(位f.(位x.f (x x)) (位x.f (x x))) (位fib a b f.f a (fib b (add a b))) z o",

success r s =
  io.do (io.put (lc.pretty r false true)) $
  io.do (io.put "\n") $
  io.print (lc.eval r { z: 0, o: 1, add } (\a b -> b) (\a b -> b) (\a b -> b) (\a b -> b) (\a b -> b) (\a b -> b) (\a b -> a)),
failure =
  io.put "no",
error m s =
  io.do (io.print m) $
  io.print s

in

lc.read prog success failure error
